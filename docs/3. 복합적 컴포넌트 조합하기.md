# ë³µí•©ì  ì»´í¬ë„ŒíŠ¸ ì¡°í•©í•˜ê¸°

> ì•ì„œ ë§Œë“  Task ë¥¼ ë°”íƒ•ìœ¼ë¡œ TaskList ë¥¼ ë§Œë“¤ì–´ë³´ì.

## TaskList

> Task ë“¤ì˜ ëª¨ìŒ

TaskList ëŠ” ì´ 4ê°€ì§€ì˜ ìƒíƒœ(state) ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

1. Default - pinned ëœ task ë“¤ì´ ì—†ëŠ” ê¸°ë³¸ ìƒíƒœ
2. Pinned - pinned ëœ task ê°€ ì¡´ì¬í•˜ì—¬ ì´ë¥¼ ë§¨ ìœ„ë¡œ ëŒì–´ì˜¬ë¦° List
3. Empty - task ê°€ ì—†ëŠ” ë¹„ì–´ìˆëŠ” ìƒíƒœ
4. Loading - task ë¥¼ ë¡œë”©í•˜ëŠ” ê³¼ì •ì˜ ìƒíƒœ

ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ë‹¤.

<img src="https://storybook.js.org/tutorials/intro-to-storybook/tasklist-states-1.png" alt="ì¼ë°˜ taskê³¼ í•€ìœ¼ë¡œ ê³ ì •ëœ task" style="zoom:67%;" />

<img src="https://storybook.js.org/tutorials/intro-to-storybook/tasklist-states-2.png" alt="ë¡œë”© ì¤‘ taskê³¼ ë¹ˆ task" style="zoom:67%;" />



### TaskList ì„¸íŒ…í•˜ê¸°

> src/components/TaskList.js

```jsx
import React from 'react';
import Task from './Task';

export default function TaskList({ loading, tasks, onPinTask, onArchiveTask }) {
  // Task ì•  ì¤‘ìš” í‘œì‹œ(pinned) ë¥¼ í•˜ê±°ë‚˜, ì™„ë£Œ í‘œì‹œ(archive) ë¥¼ í•˜ëŠ” event
  const events = {
    onPinTask,
    onArchiveTask,
  };

  // Loading ìƒíƒœì—ì„œ ë³´ì—¬ì§€ëŠ” í™”ë©´
  if (loading) {
    return <div className="list-items">loading</div>;
  }

  // Empty ìƒíƒœì—ì„œ ë³´ì—¬ì§€ëŠ” í™”ë©´
  if (tasks.length === 0) {
    return <div className="list-items">empty</div>;
  }

  return (
    <div className="list-items">
      {/* map ì„ í™œìš©í•˜ì—¬ Task ë“¤ì„ ì¶œë ¥ */}
      {tasks.map(task => (
        <Task key={task.id} task={task} {...events} />
      ))}
    </div>
  );
}
```

> src/components/TaskList.stories.js

```jsx
import React from 'react';
import TaskList from './TaskList';
import * as TaskStories from './Task.stories';

export default {
  component: TaskList,
  title: 'TaskList',
  decorators: [story => <div style={{ padding: '3rem' }}>{story()}</div>], // ìŠ¤í† ë¦¬ì— ì¶”ê°€ì ì¸ markup ì„ í•˜ê¸° ìœ„í•¨
};

const Template = args => <TaskList {...args} />;

export const Default = Template.bind({});
Default.args = {
  // ìŠ¤í† ë¦¬ì— ë³´ì—¬ì¤„ ë”ë¯¸ ë°ì´í„° êµ¬ì„±
  // Task ë°ì´í„°ëŠ” task.stories.js ì—ì„œ ì œê³µí•˜ëŠ” Default argsì˜ task ë¥¼ ê°€ì ¸ì™€ ì“´ë‹¤.
  tasks: [
    { ...TaskStories.Default.args.task, id: '1', title: 'Task 1' },
    { ...TaskStories.Default.args.task, id: '2', title: 'Task 2' },
    { ...TaskStories.Default.args.task, id: '3', title: 'Task 3' },
    { ...TaskStories.Default.args.task, id: '4', title: 'Task 4' },
    { ...TaskStories.Default.args.task, id: '5', title: 'Task 5' },
    { ...TaskStories.Default.args.task, id: '6', title: 'Task 6' },
  ],
};

export const WithPinnedTasks = Template.bind({});
WithPinnedTasks.args = {
  // ìŠ¤í† ë¦¬ì— ë³´ì—¬ì¤„ ë”ë¯¸ ë°ì´í„° êµ¬ì„±
  // Default ìƒíƒœì—ì„œ ë°ì´í„°ë¥¼ 5ê°œ ê°€ì ¸ì˜¤ê³  ì´í›„ í•˜ë‚˜ë§Œ PINNED ìƒíƒœë¡œ ì¶”ê°€í•œë‹¤.
  tasks: [
    ...Default.args.tasks.slice(0, 5),
    { id: '6', title: 'Task 6 (pinned)', state: 'TASK_PINNED' },
  ],
};

export const Loading = Template.bind({});
Loading.args = {
  tasks: [],
  loading: true,
};

export const Empty = Template.bind({});
Empty.args = {
  // ìŠ¤í† ë¦¬ì— ë³´ì—¬ì¤„ ë”ë¯¸ ë°ì´í„° êµ¬ì„±
  // ìš°ì„  Loading ìƒíƒœì˜ args ë¥¼ ì°¸ê³ í•´ì„œ ì“´ë‹¤.
  ...Loading.args,
  loading: false,
};
```

- ì—¬ê¸°ì„œ ìƒˆë¡­ê²Œ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì´ Decorators ì´ë‹¤.

  > ìì„¸í•œ ê²ƒ ë‹¤ìŒ [ë§í¬](https://storybook.js.org/docs/react/writing-stories/decorators)ë¥¼ ì°¸ì¡°í•˜ì.

  - ë°ì½”ë ˆì´í„°ëŠ” ìŠ¤í† ë¦¬ì— ì¶”ê°€ì ì¸ markup ì„ ì œê³µí•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.
  - ì—¬ê¸°ì„œëŠ” padding ì„ `3rem` ë§Œí¼ ì œê³µí•˜ì—¬ ìŠ¤í† ë¦¬ë¥¼ ë‚´ë³´ë‚¼ ë•Œ padding ì„ ì¶”ê°€í•´ì„œ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.



ìœ„ì™€ ê°™ì´ íŒŒì¼ 2ê°œë¥¼ ì„¤ì •í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

<img src="3. ë³µí•©ì  ì»´í¬ë„ŒíŠ¸ ì¡°í•©í•˜ê¸°.assets/inprogress-tasklist-states-6-0.gif" alt="inprogress-tasklist-states-6-0" style="zoom:67%;" />



### States ì¶”ê°€í•˜ê¸°

> ìœ„ì—ì„œ ë§Œë“  ê¸°ë³¸ ë¼ˆëŒ€ë¥¼ ì¢€ ë” ê¾¸ë©°ë³´ì.

> src/components/TaskList.js

```jsx
import React from 'react';
import Task from './Task';

export default function TaskList({ loading, tasks, onPinTask, onArchiveTask }) {
  // Task ì•  ì¤‘ìš” í‘œì‹œ(pinned) ë¥¼ í•˜ê±°ë‚˜, ì™„ë£Œ í‘œì‹œ(archive) ë¥¼ í•˜ëŠ” event
  const events = {
    onPinTask,
    onArchiveTask,
  };

  // Loading ìƒíƒœì—ì„œ task ë“¤ì´ ë¡œë”© ë˜ê³  ìˆì„ ë³´ì—¬ì£¼ê¸° ìœ„í•œ Html êµ¬ì¡°
  const LoadingRow = (
    <div className="loading-item">
      <span className="glow-checkbox" />
      <span className="glow-text">
        <span>Loading</span> <span>cool</span> <span>state</span>
      </span>
    </div>
  );

  // Loading ìƒíƒœì—ì„œ ë³´ì—¬ì§€ëŠ” í™”ë©´
  if (loading) {
    // ìœ„ì—ì„œ ë§Œë“  LoadingRow ë¥¼ ì—¬ëŸ¬ê°œ ë°°ì¹˜
    return (
      <div className="list-items">
        {LoadingRow}
        {LoadingRow}
        {LoadingRow}
        {LoadingRow}
        {LoadingRow}
        {LoadingRow}
      </div>
    );
  }

  // Empty ìƒíƒœì—ì„œ ë³´ì—¬ì§€ëŠ” í™”ë©´
  if (tasks.length === 0) {
    return (
      <div className="list-items">
        <div className="wrapper-message">
          <span className="icon-check" />
          <div className="title-message">You have no tasks</div>
          <div className="subtitle-message">Sit back and relax</div>
        </div>
      </div>
    );
  }

  // Pinned ëœ Task ê°€ ì¡´ì¬í•˜ë©´ TASK_PINNED ìƒíƒœì˜ Task ë¥¼ ë¨¼ì € ë°°ì¹˜í•˜ë„ë¡ í•œ ë°°ì—´
  // Spread Operator ë¥¼ í™œìš©
  const tasksInOrder = [
    ...tasks.filter(t => t.state === 'TASK_PINNED'),
    ...tasks.filter(t => t.state !== 'TASK_PINNED'),
  ];

  return (
    <div className="list-items">
      {/* map ì„ í™œìš©í•˜ì—¬ Task ë“¤ì„ ì¶œë ¥ */}
      {tasksInOrder.map(task => (
        <Task key={task.id} task={task} {...events} />
      ))}
    </div>
  );
}
```

ìœ„ ì½”ë“œì—ì„œ Loading ìƒíƒœ ê´€ë ¨ ì ìš©ë˜ëŠ” CSS ë¶€ë¶„

```css
/* loading itemì˜ ê¸°ë³¸ì ì¸ í‹€ ê´€ë ¨ CSS */
.loading-item {
  height: 3rem;
  width: 100%;
  background: white;
  display: flex;
  align-items: center;
  line-height: 1rem;
  padding-left: 16px;
}
/* loading itemì˜ ì• ë‹ˆë©”ì´ì…˜ ê´€ë ¨ CSS */
/* 1.5 ì´ˆ ì£¼ê¸°ë¡œ ë¬´í•œ ë°˜ë³µí•˜ë„ë¡ infinite ë¥¼ ê±¸ì–´ì£¼ì—ˆë‹¤. */
.loading-item .glow-checkbox,
.loading-item .glow-text span {
  animation: glow 1.5s ease-in-out infinite;
  background: #eee;
  color: transparent;
  cursor: progress;
  display: inline-block;
}
/* loading itemì—ì„œ checkboxë¥¼ êµ¬í˜„í•œ CSS */
.loading-item .glow-checkbox {
  margin-right: 16px;
  width: 12px;
  height: 12px;
}
/* loading item ì‚¬ì´ border ë¥¼ í‘œí˜„í•œ CSS */
/* + ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ loading item ì‚¬ì´ì‚¬ì´ì—ë§Œ borderë¥¼ ì¶”ê°€í•˜ë„ë¡ ì„¤ì • */
.loading-item + .loading-item {
  border-top: 1px solid #f0f9fb;
}
```



TaskList.js ë³€ê²½ ì´í›„ ì•„ë˜ì™€ ê°™ì´ ìŠ¤í† ë¦¬ì— ë°˜ì˜ëœë‹¤.

<img src="3. ë³µí•©ì  ì»´í¬ë„ŒíŠ¸ ì¡°í•©í•˜ê¸°.assets/finished-tasklist-states-6-0.gif" alt="finished-tasklist-states-6-0" style="zoom:67%;" />



### Props ìš”êµ¬ì‚¬í•­ ì •ë¦¬

> PropTypes ë¥¼ í™œìš©í•˜ì—¬ Props ì˜ ë°ì´í„° íƒ€ì…ê³¼ í•„ìˆ˜ì—¬ë¶€ë¥¼ ì •ë¦¬

> src/components/TaskList.js

```jsx
import React from 'react';
import PropTypes from 'prop-types';
import Task from './Task';

export default function TaskList() {
  ...
}


TaskList.propTypes = {
  // Loading ìƒíƒœëŠ” ë¶ˆë¦° íƒ€ì…
  loading: PropTypes.bool,
  // Task ë“¤ì€ Task.js ì˜ ë°°ì—´ í˜•íƒœë¡œ ë°›ìœ¼ë©° í•„ìˆ˜ë¡œ í•„ìš”í•˜ë‹¤.
  tasks: PropTypes.arrayOf(Task.propTypes.task).isRequired,
  // Pinned ìƒíƒœë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜(ì•„ë²¤íŠ¸)
  onPinTask: PropTypes.func,
  // Archive ìƒíƒœë¡œ ë°”ê¿”ì£¼ëŠ” í•¨ìˆ˜(ì•„ë²¤íŠ¸)
  onArchiveTask: PropTypes.func,
};

// loading ì˜ ê¸°ë³¸ ìƒíƒœëŠ” False ì´ë‹¤.
TaskList.defaultProps = {
  loading: false,
};
```





### Jestë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

> Jest ë¥¼ í™œìš©í•´ Pinned ìƒíƒœëœ Task ë“¤ì´ ë§¨ìœ„ë¡œ ì˜¬ë¼ì™€ ê³ ì •ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

> src/components/TaskList.test.js

```jsx
import React from 'react';
import ReactDOM from 'react-dom';
import '@testing-library/jest-dom/extend-expect';

import { WithPinnedTasks } from './TaskList.stories'; //ğŸ‘ˆ  í…ŒìŠ¤íŠ¸ í•´ë³¼ Pinned ìƒíƒœì˜ ìŠ¤í† ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.

it('renders pinned tasks at the start of the list', () => {
  const div = document.createElement('div');
  //ğŸ‘‡ ìš°ë¦¬ê°€ í…ŒìŠ¤íŠ¸í•  Pinned Taskë“¤ì˜ args ë¥¼ ì‚¬ìš©í•œë‹¤.
  ReactDOM.render(<WithPinnedTasks {...WithPinnedTasks.args} />, div);

  // ë§¨ ë§ˆì§€ë§‰ task ì¸ 6ë²ˆ task ê°€ ë§ˆì§€ë§‰ì´ ì•„ë‹Œ ë§¨ìœ„ì— ì˜¤ê¸°ë¥¼ í¬ë§í•œë‹¤.
  const lastTaskInput = div.querySelector('.list-item:nth-child(1) input[value="Task 6 (pinned)"]');
  expect(lastTaskInput).not.toBe(null);

  ReactDOM.unmountComponentAtNode(div);
});
```



ì´í›„ `yarn test` ë¥¼ í†µí•´ test í•´ë³¸ë‹¤.

ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆë‹¤.

<img src="3. ë³µí•©ì  ì»´í¬ë„ŒíŠ¸ ì¡°í•©í•˜ê¸°.assets/image-20220210160232618.png" alt="image-20220210160232618" style="zoom:50%;" />