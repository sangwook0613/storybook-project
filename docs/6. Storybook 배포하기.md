# Storybook ë°°í¬í•˜ê¸°

>  [Chromatic](https://www.chromatic.com/)ì„ ì‚¬ìš©í•˜ì—¬ Storybook ì„ ë°°í¬ í•´ë³´ì.

### ì •ì  ì•±ìœ¼ë¡œ ë‚´ë³´ë‚´ê¸°

`yarn build-storybook` ì„ í™œìš©í•´ì„œ storybook-static ë””ë ‰í„°ë¦¬ì— ì •ì  Storybook íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë°°í¬í•  ìˆ˜ ìˆë‹¤.



ë‹¤ë§Œ, ì´ë²ˆ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” Storybook ì¸¡ì—ì„œ ê°œë°œí•œ ë¬´ë£Œ ë°°í¬ ì„œë¹„ìŠ¤ì¸ Chromatic ê³¼ GitHub Action ì„ í™œìš©í•˜ì—¬ ë°°í¬í•´ë³´ì.

## Github ì €ì¥ì†Œ ì„¤ì •

ë¡œì»¬ ì½”ë“œê°€ ì›ê²© ë²„ì „ ì œì–´ ì„œë¹„ìŠ¤ì™€ ë™ê¸°í™” ë˜ê¸° ìœ„í•´, github ì €ì¥ì†Œì— ì½”ë“œë¥¼ ì˜¬ë ¤ì•¼ í•œë‹¤.



## Chromatic ì„¤ì¹˜
Chromatic ë¥¼ ë¨¼ì € ì„¤ì¹˜í•˜ì.

```bash
yarn add -D chromatic
```

íŒ¨ì§€ê°€ ì„¤ì¹˜ëœ ì´í›„ ì•„ë˜ ì£¼ì†Œì—ì„œ Github ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì.

https://www.chromatic.com/start

ë¡œê·¸ì¸ì•ˆ í›„ ì•ì„œ ë§Œë“  í”„ë¡œì íŠ¸ë¥¼ ì°¾ì•„ì„œ í´ë¦­í•œ í›„, í”„ë¡œì íŠ¸ë¥¼ ìœ„í•´ ìƒì„±ëœ ê³ ìœ  project token ì„ ë³µì‚¬í•œë‹¤.

<img src="6. Storybook ë°°í¬í•˜ê¸°.assets/chromatic-setup-learnstorybook.gif" alt="chromatic-setup-learnstorybook" style="zoom:80%;" />

ì´í›„ ëª…ë ¹ì–´ì— project tokenì„ ë„£ê³  ì‹¤í–‰í•œë‹¤.

```bash
yarn chromatic --project-token=<project token>
```

ì´í›„ ì‹¤í–‰ì´ ì™„ë£Œë˜ë©´ ë°°í¬ ì£¼ì†Œë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

<img src="6. Storybook ë°°í¬í•˜ê¸°.assets/image-20220214155203694.png" alt="image-20220214155203694" style="zoom:50%;" />

ë°°í¬ëœ ì£¼ì†Œ : https://6209f9f22e2222003af5f880-uzvhhmrsau.chromatic.com/



## ì§€ì†ì ì¸ ë°°í¬

> Githubì—ì„œ ì œê³µí•´ì£¼ëŠ” [GitHub Actions](https://github.com/features/actions) ì„ í™œìš©í•˜ì—¬ CI ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•´ë³´ì

[GitHub Actions](https://github.com/features/actions) ë¼ëŠ” GitHubì— ë‚´ì¥ëœ ë¬´ë£Œ CI(ì§€ì†ì  í†µí•© continuous integration) ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ìœ¼ë¡œ Storybookì„ ë°°í¬í•´ë³´ì. 



### Github Action ì„¸íŒ…í•˜ê¸°

`.github` ë¼ëŠ” ìƒˆë¡œìš´ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  ì•„ë˜ `workflows` ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“  í›„ `chromatic.yml` íŒŒì¼ì„ ë§Œë“ ë‹¤.

> .github/workflows/chromatic.yml

```
# Workflow ì´ë¦„
name: 'Chromatic Deployment'

# Event for the workflow
on: push

# List of jobs
jobs:
  test:
    # Operating System
    runs-on: ubuntu-latest
    # Job steps
    steps:
      - uses: actions/checkout@v1
      - run: yarn
        #ğŸ‘‡ Adds Chromatic as a step in the workflow
      - uses: chromaui/action@v1
        # Options required for Chromatic's GitHub Action
        with:
          #ğŸ‘‡ Chromatic projectToken, see https://storybook.js.org/tutorials/intro-to-storybook/react/en/deploy/ to obtain it
          projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}
          token: ${{ secrets.TOKEN }}
```

- ì—¬ê¸°ì„œ pojectToken ì— ë“¤ì–´ê°€ëŠ” CHROMATIC_PROJECT_TOKEN ì€ ì•ì„œ Chromatic ë°°í¬ ëª…ë ¹ì–´ì— ì‘ì„±í•œ í† í° ê°’ì„ ë„£ìœ¼ë©´ ë˜ê³ 

- token ì— ë“¤ì–´ê°€ëŠ” TOKEN ì€ ê¹ƒí—ˆë¸Œì—ì„œ ìì²´ ë§Œë“œëŠ” token ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

  - ìì„¸í•œ ë°©ë²•ì€ [ì´ ë§í¬](https://zeddios.tistory.com/1047)ë¥¼ ë”°ë¥´ë©° repo ì™€ workflow ë§Œ ì²´í¬í•œ í›„ ì§„í–‰í•˜ì˜€ë‹¤.

- secrets ëŠ” ê° í”„ë¡œì íŠ¸ì˜ settings ì— ë“¤ì–´ê°€ì„œ ì œì‘í•  ìˆ˜ ìˆìœ¼ë©°, ë³¸ì¸ì€ ì•„ë˜ì™€ ê°™ì´ ì œì‘í•˜ì˜€ë‹¤.

  <img src="6. Storybook ë°°í¬í•˜ê¸°.assets/image-20220214174017394.png" alt="image-20220214174017394" style="zoom:80%;" />



ì´í›„ commit ì„ ì§„í–‰í•˜ê³ 

```bash
git add .

git commit -m "GitHub action setup"
```

í‘¸ì‹œë¥¼ ì§„í–‰í•˜ë©´

```bash
git push origin main
```



#### ë°°í¬ ì™„ë£Œ

ë§¤ í‘¸ì‹œ ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ ë°°í¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<img src="https://storybook.js.org/tutorials/intro-to-storybook/chromatic-user-dashboard.png" alt="Chromatic ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ" style="zoom:80%;" />